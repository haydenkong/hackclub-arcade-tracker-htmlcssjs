<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcade Tracker</title>


    <!-- Google fonts - Official Arcade fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Slackey&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Gaegu&display=swap" rel="stylesheet">

    <link rel="icon" href="favicon.png" type="image/x-icon">

    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #fbefd6;
        }
        .container {
            max-width: 650px;
            margin: auto;
            padding: 20px;
            border-radius: 5px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        label {
            display: block;
        }
        input[type="number"] {
            max-width: 60px;
            background-color: #ede5d3;
            border-radius: 0px;
            border: none;
            outline: none;
            border-radius: 5px;
            font-size: 1.4rem;
        }
        .inline-container {
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        .inline-container label {
            margin: 0;
        }
        .inline-container input[type="number"] {
            flex: 2;
            padding: 8px;
        }
        .progress-bar {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 3px;
            margin-bottom: 10px;
            padding: 3px;
            position: relative;
            height: 22px;
            border-radius: 5px;
        }
        .progress {
            border-radius: 5px;
            position: absolute;
            height: 100%;
            transition: width 200ms ease-in-out;
            top: 0;
            left: 0;
        }
        .actual-progress {
            background-color: #00afb3;
        }
        .ideal-progress {
            background-color: #fb8b3c;
        }
        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.4rem;
            transition: background-color 0.3s ease;
        }
        #addOneHour {
            background-color: #ff5c16;
            color: #fbefd6;
            transition: 0.2s;
            border: #fb8b3c 1px solid;
        }
        #addOneHour:hover {
            transform: scale(1.05);
        }
        #addOneHour:active {
            transform: scale(0.95);
        }
        #removeOneHour {
            background-color: #fbefd6;
            color: #fb8b3c;
            border: #fb8b3c 1px solid;
            transition: 0.2s;
        }
        #removeOneHour:hover {
            transform: scale(1.05);
        }
        #removeOneHour:active {
            transform: scale(0.95);
        }
        .about {
            background-color: #00afb3;
            color: #fbefd6;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
        }
        .ticket-count {
            font-size: 4rem;
            text-align: center;
            margin: 5px 0;
        }
        .font-1{
            font-family: 'Slackey';
            color: #fb8b3c;
        }
        .font-2{
            font-family: 'Gaegu';
        }
        .heading{
            font-size: 2.5rem;
            margin-bottom: 0px;
        }
        .description{
            font-size: 1.4rem;
            text-align: center;
            margin: 0px;
            margin-bottom: 60px;
        }
        a{
            color: #ef3553;
            text-decoration: underline;
            text-underline-position: under;
            cursor: pointer;
        }
        a:hover{
            color: #ef3553;
            text-decoration: underline wavy;
        }
        .about-listed{
            letter-spacing: 0.01px;
            font-size: 1.2rem;
        }
        .progress-bar-header{
            margin-top: 25px;
            font-size: 1.5rem;
            margin-bottom: 0px;
        }
        .progress-bar-text{
            font-size: 1.0rem;
            margin-top: 0px;
            margin-bottom: 4px;
        }
        .days-remaining{
            font-size: 1.8rem;
            text-align: center;
            margin: 5px 0px;
        }
        .progressbar-color{
            min-width: 20px;
            min-height: 20px;
            max-width: 20px;
            max-height: 20px;
            background-color: #00afb3;
            margin-top: 3px;
            border-radius: 4px;
            margin-right: 5px;
        }
        .idealprogressbar-color{
            min-width: 20px;
            min-height: 20px;
            max-width: 20px;
            max-height: 20px;
            background-color: #fb8b3c;
            margin-top: 3px;
            border-radius: 4px;
            margin-right: 5px;
        }
        .spanText{
            font-size: 1.2rem;
            /* font-weight: bold; */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="font-1 heading">The Arcade Tracker</h1>
        <p class="font-2 description">Track your progress towards your goal for the <a href="https://hackclub.com/arcade">Hack Club Arcade</a>!</p>
            
        <div style="text-align: center;">
            <div class="inline-container font-2">
                <label style="font-size: 1.4rem;" for="ticketGoal">Ticket Goal:</label>
                <input type="number" class="font-2" id="ticketGoal" value="100">
            </div>  
        </div>  

        <div class="ticket-count font-1">
            <span id="currentTickets" style="color: #00afb3;">0</span> üéüÔ∏è
        </div>
        <div style="text-align: center;">
            <a id="enterTicketsLink" class="font-2">Enter Tickets</a>
        </div>
        <div>
            <p class="progress-bar-header font-2">Your Progress:</p>
            <div class="progress-bar">
                <div class="progress actual-progress" id="progressBar"></div>
                <div class="progress ideal-progress" id="idealProgressBar"></div>
            </div>

            <div style="display: flex;">
                <div class="progressbar-color"></div>
                <p id="progressText" class="progress-bar-text"></p>
            </div>

            <div style="display: flex;">
                <div class="idealprogressbar-color"></div>
                <p id="idealProgressText" class="progress-bar-text"></p>
            </div>

        </div>

        
        
        <p class="days-remaining font-2" style="color: #000000; margin-top: 30px;" id="daysLeft"></p>
        <p class="days-remaining font-2" style="color: #000000; margin-bottom: 50px;" id="tickets-left"></p>
        
        <div class="button-container">
            <button class="font-1" id="addOneHour">Add 1 Hour</button>
            <button class="font-1" id="removeOneHour">Oops, remove 1 ticket</button>
        </div>
        <div class="about">
            <h3 class="font-1" style="color: #fbefd6; font-size: 1.5rem; margin-bottom: 0px; text-align: center;">How it works</h3>
            <ol class="font-2">
                <li class="about-listed"><b>Work on projects</b> - Hack on something cool!</li>
                <li class="about-listed"><b>Bank your hours</b> - Join the <a style="color: #fbefd6" href="https://hackclub.com/slack">Hack Club Slack</a> and use /hack in #arcade to log your hours!</li>
                <li class="about-listed"><b>Redeem your Prizes</b> - Use your tickets to buy prizes for your next project!</li>
            </ol>    
        </div>

        <h2 class="font-1" style="font-size: 2rem; text-align: center;">Faq</h2>
        <p class="font-2" style="text-align: center; font-size: 1.2rem;">I am still working on the FAQ, but in the meantime, you can have a look at the <a href="https://docs.google.com/document/d/1RXCe1nNrFdiolKCknkR5Ho1AG7Kf_2LsTAKTHxQodic/">official FAQ</a>, <a href="https://github.com/hackclub/arcade-constitution">Arcade Constitution</a>, or message the #arcade-help channel on the <a href="https://hackclub.com/slack">Hack Club Slack</a>! Alternatively, you can visit the FAQ section of the <a href="https://hackclub.com/arcade/">Hack Club Arcade Website</a>.</p>
        <p class="font-2" style="text-align: center; font-size: 1.2rem;">If you have any suggestions or issues, contact me on the Hack Club Slack: @Hayden Kong</p>
    </div>
    

    
    <script>
        const ticketGoalInput = document.getElementById('ticketGoal');
        const currentTicketsElement = document.getElementById('currentTickets');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const idealProgressBar = document.getElementById('idealProgressBar');
        const idealProgressText = document.getElementById('idealProgressText');
        const daysLeftElement = document.getElementById('daysLeft');
        const addOneHourButton = document.getElementById('addOneHour');
        const removeOneHourButton = document.getElementById('removeOneHour');
        const ticketsLeftElement = document.getElementById('tickets-left');
        const enterTicketsLink = document.getElementById('enterTicketsLink');

        const startDate = new Date('2024-06-18');
        const endDate = new Date('2024-08-31');

        function loadFromStorage() {
            const storedGoal = localStorage.getItem('ticketGoal');
            const storedTickets = localStorage.getItem('currentTickets');
            
            if (storedGoal) ticketGoalInput.value = storedGoal;
            if (storedTickets) currentTicketsElement.textContent = storedTickets;
        }

        function saveToStorage() {
            localStorage.setItem('ticketGoal', ticketGoalInput.value);
            localStorage.setItem('currentTickets', currentTicketsElement.textContent);
        }

        function updateProgress() {
            const ticketGoal = parseInt(ticketGoalInput.value);
            const currentTickets = parseInt(currentTicketsElement.textContent);
            const progress = (currentTickets / ticketGoal) * 100;
            const cappedProgress = Math.min(progress, 100);

            progressBar.style.width = `${cappedProgress}%`;
            // progressText.textContent = `You are ${cappedProgress.toFixed(1)}% complete to your goal of ${ticketGoal} tickets.`;
            progressText.innerHTML = `You are <span class="font-2 spanText">${cappedProgress.toFixed(1)}%</span> complete to your goal of ${ticketGoal} tickets.`;

            const now = new Date();
            const totalDays = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
            const passedDays = Math.ceil((now - startDate) / (1000 * 60 * 60 * 24));
            const remainingDays = Math.max(totalDays - passedDays, 0);
            const ticketsLeft = ticketGoal - currentTickets;
            ticketsLeftElement.textContent = `You have ${ticketsLeft} tickets left to earn.`;
            daysLeftElement.textContent = `Days Left: ${remainingDays}`;

            const idealProgress = (passedDays / totalDays) * 100;
            const cappedIdealProgress = Math.min(idealProgress, 100);
            idealProgressBar.style.width = `${cappedIdealProgress}%`;
            idealProgressText.innerHTML = `You should be <span class="font-2 spanText"> ${cappedIdealProgress.toFixed(1)}%</span> complete.`;

            // Update z-index dynamically
            if (cappedProgress >= cappedIdealProgress) {
                progressBar.style.zIndex = 1;
                idealProgressBar.style.zIndex = 2;
            } else {
                progressBar.style.zIndex = 2;
                idealProgressBar.style.zIndex = 1;
            }


            saveToStorage();
        }

        ticketGoalInput.addEventListener('input', updateProgress);

        addOneHourButton.addEventListener('click', () => {
            currentTicketsElement.textContent = parseInt(currentTicketsElement.textContent) + 1;
            updateProgress();
        });

        removeOneHourButton.addEventListener('click', () => {
            const currentTickets = parseInt(currentTicketsElement.textContent);
            if (currentTickets > 0) {
                currentTicketsElement.textContent = currentTickets - 1;
                updateProgress();
            }
        });

        enterTicketsLink.addEventListener('click', () => {
            const tickets = prompt('Enter the number of tickets:');
            if (tickets !== null && !isNaN(tickets) && tickets >= 0) {
                currentTicketsElement.textContent = tickets;
                updateProgress();
            }
        });

        loadFromStorage();
        updateProgress();
    </script>
</body>
</html>
